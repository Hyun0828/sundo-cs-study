# 목차
- [학습 내용](#학습-내용)
  - [CPU 스케줄링이란?](#cpu-스케줄링이란)
  - [우선순위](#우선순위)
  - [우선순위 산정 방식](#우선순위-산정-방식)
  - [스케줄링 큐](#스케줄링-큐)
  - [리눅스 스케줄링 정책](#리눅스-스케줄링-정책)
    - [일반(Normal) 프로세스용 정책](#일반normal-프로세스용-정책-cfs로-관리)
    - [실시간(Real-Time) 프로세스용 정책](#실시간real-time-프로세스용-정책-실시간-스케줄러로-관리)
    - [우선순위 체계와 선점 관계](#우선순위-체계와-선점-관계)
    - [리눅스 우선순위 계층구조 정리](#리눅스-우선순위-계층구조-정리)
- [핵심 키워드 정리](#핵심-키워드-정리)
  - [CPU 스케줄링 관련](#cpu-스케줄링-관련)
  - [스케줄링 알고리즘 관련](#스케줄링-알고리즘-관련)
  - [리눅스 스케줄링 정책 관련](#리눅스-스케줄링-정책-관련)
  - [우선순위 체계](#우선순위-체계)
  - [선점 관계](#선점-관계)
- [나왔던 질문](#나왔던-질문)

---

# 학습 내용

## CPU 스케줄링이란?
> 프로세스와 스레드가 자원을 어떻게 할당받을까?
+ 운영체제는 운영중인 프로세스와 스레드에 자원을 분배한다.
+ 여기서 CPU 자원을 분배하는 방법을 CPU 스케줄링이라고 한다.

## 우선순위
> 모든 프로세스가 공평하게 CPU 자원을 할당 받지는 않는다.
+ 운영체제는 프로세스 별로 우선순위를 판단하는데, 이 우선순위를 PCB(Process Control Block)에 명시해둔다.
+ 우선순위가 높은 프로세스일수록 CPU 자원을 빠르고, 많이 할당 받을 수 있다.
+ 운영체제는 실행중인 프로세스들의 우선순위를 확인할 수 있는 방법을 제공하는데, 리눅스 기반의 OS에서 사용되는 ps 명령어가 그 예이다.

## 우선순위 산정 방식
> 그렇다면 운영체제는 어떤 기준으로 프로세스 별 우선순위를 정할까?
+ 고려 요소는 많지만, 기본 원칙은 **CPU 활용율을 높게 만들도록/유지하도록 우선순위를 산정한다.**
+ 입출력 작업이 많은 프로세스(입출력 집중 프로세스)의 우선순위를 높게 산정하는데, 입출력 작업은 대기시간이 있기 때문이다.
+ 입출력 집중 프로세스가 대기하는 시간이 많으므로 빠르게 대기 상태로 들어가도록 두고, CPU 집중 프로세스가 계속해서 자원을 사용할 수 있도록 하는 것이다.

## 스케줄링 큐
> 자원을 할당받지 못하고 있는 프로세스는 그럼 어떻게 될까?
+ 자원을 당장 이용 불가능할 경우(다른 프로세스가 점유 중인 경우), 스케줄링 큐라는 특별한 큐에 프로세스 자신의 PCB를 추가해야 한다.
+ 여기서 자원이란 얘기 중이었던 CPU 뿐만이 아닌 메모리, 입출력 장치 등등 모든 리소스에 적용된다.

> 자원을 사용중일 때, 우선순위가 더 높은 프로세스가 자원을 요청하면 어떻게 돼?
+ 자원을 점유중인 프로세스보다 우선순위가 더 높은 프로세스가 자원을 요청한다면, **스케줄링 방식에 따라 결과가 나뉜다.**
+ 선점형(Preemptive) 스케줄링의 경우:
  + 현재 자원을 사용 중인 낮은 우선순위 프로세스로부터 자원을 강제로 빼앗을 수 있다.
  + 이 경우, 낮은 우선순위 프로세스는 일시 중단되고 그 PCB가 스케줄링 큐에 들어가게 된다.
+ 비선점형(Non-preemptive) 스케줄링의 경우:
  + 현재 자원을 사용 중인 프로세스가 자원을 자발적으로 반환할 때까지 우선순위가 높은 프로세스도 기다려야 함.
  + 따라서 우선순위가 높더라도 이미 실행 중인 프로세스는 중단시킬 수 없음.

> 그러면 스케줄링 큐는 무조건 선입선출(FIFO)일까?
+ 스케줄링 큐가 무조건 선입선출(FIFO) 방식으로만 동작하는 것은 아님. **운영체제는 다양한 스케줄링 알고리즘을 사용하며, 각 알고리즘마다 큐의 구조와 운영 방식이 다르다.**
+ FIFO/FCFS(First-Come, First-Served): 가장 단순한 형태로, 도착한 순서대로 프로세스를 실행함.
+ 우선순위 큐(Priority Queue): 프로세스의 우선순위에 따라 정렬된다. 우선순위가 높은 프로세스가 먼저 실행함.
+ 다단계 큐(Multilevel Queue): 여러 개의 큐를 사용하여 다른 우선순위 또는 특성을 가진 프로세스들을 서로 다른 큐에 배치함.
+ 다단계 피드백 큐(Multilevel Feedback Queue): 여러 개의 큐를 사용하면서, 프로세스의 동작 패턴에 따라 프로세스가 다른 큐로 이동할 수 있음.
+ 라운드 로빈(Round Robin): FIFO 방식이지만 각 프로세스는 정해진 시간(타임 퀀텀) 동안만 실행되고, 이후 큐의 뒤로 이동함.
+ SJF(Shortest Job First): 실행 시간이 가장 짧은 프로세스를 먼저 실행함.
+ SRTF(Shortest Remaining Time First): 남은 실행 시간이 가장 짧은 프로세스를 먼저 실행함.

## 리눅스 스케줄링 정책
> 리눅스에서는 프로세스의 성질에 따라 각각 다른 스케줄링 정책을 적용함.

### 일반(Normal) 프로세스용 정책 (CFS로 관리)
> CFS는 가중치가 반영된 가상의 실행시간을 기반으로, 적게 실행된 프로세스의 우선순위를 높여주는 방식.

* **SCHED_NORMAL (또는 SCHED_OTHER)**:
   * 일상적인 일반 프로그램들(웹 브라우저, 문서 편집기 등)에 사용되는 기본 정책임.
   * 사용자가 실행하는 대부분의 프로그램은 이 정책으로 동작함.
   * Nice 값(-20~19)을 통해 세부 우선순위를 조정할 수 있음.
   * 모든 프로그램이 CPU를 공정하게 나눠 쓸 수 있도록 함.

* **SCHED_BATCH**:
   * CPU를 많이 사용하는 백그라운드 작업(예: 대용량 계산, 렌더링)에 적합함.
   * 사용자와 상호작용이 없는(키보드 입력을 기다리지 않는) 프로세스용임.
   * NORMAL보다 CPU 우선순위가 낮아 일반 프로그램의 응답성을 해치지 않음.
   * 예: 비디오 인코딩, 과학적 계산, 데이터 처리 작업

* **SCHED_IDLE**:
   * 시스템이 거의 사용되지 않을 때만 동작하는 극히 낮은 우선순위 작업용임.
   * 다른 모든 프로세스가 CPU를 원하지 않을 때만 실행됨.
   * 시스템 성능에 영향을 주지 않아야 하는 작업에 적합함.
   * 예: 백그라운드 파일 인덱싱, 주기적 청소 작업, 통계 수집

### 실시간(Real-Time) 프로세스용 정책 (실시간 스케줄러로 관리)

* **SCHED_FIFO**:
   * 선입선출 방식의 실시간 정책임.
   * 일단 실행되면 자발적으로 CPU를 포기하거나 작업이 끝날 때까지 계속 실행됨.
   * 같은 우선순위에서는 먼저 도착한 프로세스가 먼저 완전히 실행됨.
   * 예: 오디오 처리, 로봇 제어, 센서 모니터링 같은 즉각적 응답이 필요한 작업

* **SCHED_RR**:
   * FIFO의 변형으로, 시간 할당량이 추가된 버전임.
   * 같은 우선순위의 실시간 프로세스들이 번갈아가며 실행될 수 있음.
   * 정해진 시간(time slice)이 지나면 같은 우선순위의 다음 프로세스에게 차례가 넘어감.
   * 예: 여러 실시간 작업이 동시에 필요할 때 (여러 센서 데이터 처리)

* **SCHED_DEADLINE**:
   * 가장 엄격한 시간 제약이있는 작업을 위한 정책임.
   * 특정 마감시간(deadline) 내에 반드시 실행되어야 하는 작업에 사용함.
   * 마감시간, 실행 시간, 작업 주기를 명시하면 스케줄러가 이를 보장함.
   * 모든 정책 중 가장 높은 우선순위를 가짐.
   * 예: 실시간 영상 처리, 고성능 오디오 처리, 정밀 제어 시스템

## 우선순위 체계와 선점 관계

### 정책 간 우선순위 (높은 순)
1. SCHED_DEADLINE
2. SCHED_FIFO/SCHED_RR (1-99 우선순위 값)
3. SCHED_NORMAL
4. SCHED_BATCH
5. SCHED_IDLE

### 실시간 프로세스 우선순위
* 1-99 사이의 정적 우선순위 값을 가짐
* 99가 가장 높고, 1이 가장 낮음
* 높은 우선순위 값을 가진 실시간 프로세스는 낮은 값의 실시간 프로세스를 항상 선점함

### 일반 프로세스 우선순위
* nice 값(-20~19)으로 우선순위를 조정함
* -20이 가장 높고, 19가 가장 낮음(기본값은 0)
* 낮은 nice 값을 가진 프로세스가 더 많은 CPU 시간을 할당받음(가중치)

### 선점 관계
* 실시간 정책 프로세스는 일반 정책 프로세스보다 항상 먼저 실행됨(높은 우선순위)
* 실시간 프로세스가 CPU를 원하면 즉시 모든 일반 프로세스의 실행을 중단시킴(선점)
* SCHED_FIFO는 같은 우선순위 내에서 비선점형이지만, 높은 우선순위에 의해서는 선점됨
* SCHED_RR은 시간 할당량에 따라 같은 우선순위 내에서도 선점이 발생함
* CFS(NORMAL/BATCH/IDLE)는 기본적으로 선점형이며 가상 실행 시간에 따라 조정됨

### 리눅스 우선순위 계층구조 정리
+ 최상위 실시간 정책: SCHED_DEADLINE
+ 상위 실시간 정책: SCHED_FIFO, SCHED_RR (우선순위 값에 따라 내부 우선순위가 결정됨)
+ 일반 정책: SCHED_NORMAL(OTHER) > SCHED_BATCH > SCHED_IDLE
---

# 핵심 키워드 정리

## CPU 스케줄링 관련
- **CPU 스케줄링**: 운영체제가 프로세스와 스레드에 CPU 자원을 분배하는 방법
- **우선순위**: 프로세스별로 CPU 자원 할당의 순서와 양을 결정하는 값
- **PCB (Process Control Block)**: 프로세스의 정보와 우선순위를 저장하는 자료구조
- **입출력 집중 프로세스**: 입출력 작업이 많은 프로세스로, 일반적으로 우선순위가 높게 설정됨
- **CPU 집중 프로세스**: CPU 연산이 많은 프로세스로, 입출력 집중 프로세스보다 낮은 우선순위로 설정되는 경향이 있음

## 스케줄링 알고리즘 관련
- **선점형 스케줄링**: 우선순위가 높은 프로세스가 실행 중인 프로세스의 자원을 빼앗을 수 있는 방식
- **비선점형 스케줄링**: 실행 중인 프로세스가 자발적으로 자원을 반환할 때까지 기다리는 방식
- **FIFO/FCFS**: 먼저 도착한 프로세스를 먼저 실행하는 방식
- **우선순위 큐**: 우선순위에 따라 프로세스를 정렬하는 큐
- **다단계 큐**: 여러 개의 큐를 사용하여 다른 우선순위 또는 특성을 가진 프로세스들을 서로 다른 큐에 배치하는 방식
- **다단계 피드백 큐**: 여러 개의 큐를 사용하면서, 프로세스의 동작 패턴에 따라 프로세스가 다른 큐로 이동할 수 있는 방식
- **라운드 로빈**: FIFO 방식이지만 각 프로세스는 정해진 시간(타임 퀀텀) 동안만 실행되고, 이후 큐의 뒤로 이동하는 방식
- **SJF(Shortest Job First)**: 실행 시간이 가장 짧은 프로세스를 먼저 실행하는 방식
- **SRTF(Shortest Remaining Time First)**: 남은 실행 시간이 가장 짧은 프로세스를 먼저 실행하는 방식

## 리눅스 스케줄링 정책 관련
- **CFS (Completely Fair Scheduler)**: 리눅스의 기본 스케줄러로 일반 프로세스들을 관리함
- **실시간 스케줄러**: 리눅스에서 실시간 프로세스들을 관리하는 스케줄러

### 일반 프로세스 정책 (CFS로 관리)
- **SCHED_NORMAL(OTHER)**: 일반적인 사용자 애플리케이션용 기본 스케줄링 정책
- **SCHED_BATCH**: CPU 집약적인 비대화형 백그라운드 프로세스용 정책
- **SCHED_IDLE**: 매우 낮은 우선순위의 백그라운드 작업용 정책, 시스템 유휴 시간에만 실행됨

### 실시간 프로세스 정책
- **SCHED_FIFO**: 실시간 선입선출 정책, 같은 우선순위 내에서는 비선점형
- **SCHED_RR**: 실시간 라운드 로빈 정책, 시간 할당량이 적용되는 FIFO의 변형
- **SCHED_DEADLINE**: 마감시간 보장이 필요한 작업용 정책, 가장 높은 우선순위를 가짐

## 우선순위 체계
- **실시간 우선순위**: 1-99 값으로 표현되며, 99가 가장 높고 1이 가장 낮음
- **일반 프로세스 우선순위**: nice 값(-20~19)으로 표현되며, -20이 가장 높고 19가 가장 낮음(기본값: 0)
- **우선순위 계층 구조**: SCHED_DEADLINE > SCHED_FIFO/RR > SCHED_NORMAL > SCHED_BATCH > SCHED_IDLE

## 선점 관계
- 실시간 정책 프로세스는 항상 일반 정책 프로세스를 선점함
- 높은 우선순위의 실시간 프로세스는 낮은 우선순위의 실시간 프로세스를 선점함
- SCHED_FIFO는 같은 우선순위 내에서는 비선점형이지만, 높은 우선순위에 의해 선점됨
- SCHED_RR은 시간 할당량에 따라 같은 우선순위 내에서도 선점이 발생함
- CFS 관리 정책들은 기본적으로 선점형이며 가상 실행 시간에 따라 조정됨

---

# 나왔던 질문
